"use strict";(self.webpackChunkpurple_react_free=self.webpackChunkpurple_react_free||[]).push([[503],{503:function(e,n,t){t.r(n);var a=t(885),o=t(2791),i=t(3687),r=t(8687),s=t(2930),c=t(7266),l=t(3108),d=t(184);n.default=function(){var e=o.useState("Hotels"),n=(0,a.Z)(e,2),t=n[0],h=n[1],m=(0,r.v9)((function(e){return e.hotelBooking})),f=(0,r.v9)((function(e){return e.userInfo})),b=(0,r.v9)((function(e){return e.hotels})),g=(0,r.v9)((function(e){return e.deals})),j=(0,r.v9)((function(e){return e.bookAppointment})),x=o.useState([]),k=(0,a.Z)(x,2),v=k[0],N=k[1],y=o.useState([]),C=(0,a.Z)(y,2),H=C[0],w=C[1],_=(0,r.I0)(),q=(0,c.v0)(l.Z),S=o.useState(!1),D=(0,a.Z)(S,2),B=D[0],M=D[1],E=(0,r.v9)((function(e){return e.brands})),R=o.useState(1),A=(0,a.Z)(R,2),Z=A[0],I=A[1],Q=o.useState([]),F=(0,a.Z)(Q,2),O=F[0],T=F[1];o.useEffect((function(){if(b&&m&&f&&g&&j&&"Hotels"==t){var e=[];m.forEach((function(n,t){if(t<10*Z&&t>=10*Z-10){var a=f.filter((function(e){return e.uid==n.user_id})),o=b.filter((function(e){return e.id==n.hotel_id})),i={data:n,user:a[0],hotel:o[0]};e.push(i)}})),N(e);for(var n=m.length/10,a=parseInt(n),o=[],i=0;i<a;i++)o.push(a);n>a?(o.push(a),T(o)):T(o)}if(b&&m&&f&&j&&g&&"Deals"==t){var r=[];j.forEach((function(e,n){if(n<10*Z&&n>=10*Z-10){var t=f.filter((function(n){return n.uid==e.uid})),a=g.filter((function(n){return n.id==e.deal_id})),o={data:e,user:t[0],deal:a[0]};r.push(o)}})),w(r);for(var s=j.length/10,c=parseInt(s),l=[],d=0;d<c;d++)l.push(c);s>c?(l.push(c),T(l)):T(l)}}),[t+Z+b+g+f+j+m]),o.useEffect((function(){(0,s.qC)(s.HQ+"/getData",{tableName:"hotel_booking",orderColumn:"date"}).then((function(e){if(Array.isArray(e))return _((0,s.oB)(e));console.log(e)}))}),[B]),o.useEffect((function(){(0,s.qC)(s.HQ+"/getData",{tableName:"book_appointment",orderColumn:"date"}).then((function(e){if(Array.isArray(e))return _((0,s._s)(e));console.log(e)}))}),[B]);var P=function(e){(0,s.qC)(s.HQ+"/setData",{auth:q.currentUser,tableName:"redeem_history",columns:["purches_type","purches_id","name","date","image","uid"],values:["hotel",e.hotel.id,e.hotel.name,(0,s.cR)(new Date),e.hotel.image,e.user.uid]}).then((function(n){n.insertId&&(0,s.qC)(s.HQ+"/updateData",{tableName:"hotel_booking",columns:["visible"],values:[1],condition:"id="+e.data.id}).then((function(e){M(e),console.log(e)})),console.log(n.message)}));var n=f.filter((function(n){return n.uid==e.user.uid}));n&&n.length>0&&n[0].email&&((0,s.qC)(s.HQ+"/sendMessage",{title:"Your Booking Request has been confirmed",body:"This email is to confirm your booking on ".concat((0,s.Ny)(e.data.check_in)," for a ").concat(e.data.room," room at the ").concat(e.hotel.name,". The check-in date shall be on ").concat((0,s.Ny)(e.data.check_in)," and the check-out date shall be on ").concat((0,s.Ny)(e.data.check_out),"."),uid:n[0].uid}).then((function(e){console.log(e)})),(0,s.qC)(s.HQ+"/sendEmail",{to:n[0].email,subject:"Your Booking Request has been confirmed - Smira Club",text:"<p>Hello ".concat(n[0].name,"</p>\n                <p>This email is to confirm your booking on ").concat((0,s.Ny)(e.data.check_in)," for a ").concat(e.data.room," room at the ").concat(e.hotel.name,". The check-in date shall be on ").concat((0,s.Ny)(e.data.check_in)," and the check-out date shall be on ").concat((0,s.Ny)(e.data.check_out),".</p>\n\n               <p> Further details of your booking are listed below:</p>\n\n               <p> Number of guests: ").concat(e.data.adult,"A, ").concat(e.data.children,"C</p>\n\n               <p>Amenities: ").concat(e.hotel.conditions,"</p>\n\n              <p> If you have any inquiries, please do not hesitate to contact us.</p>\n\n            <p> We are looking forward to your visit and hope that you enjoy your stay.</p>\n\n\n               <p> Best regards</p>\n              <p>  Smira Club</p>\n\n                 \n               <p> Ranjit Studio Compound, </p>\n               <p> Ground & 1st Floor, </p>\n               <p> C-Block, Plot No. 115, </p>\n               <p> Dada Saheb Phalke Marg, </p>\n               <p> Opp. Bharatkshetra, Hindmata, </p>\n               <p> Dadar East, Mumbai, </p>\n                <p>Maharashtra 400014 </p>\n                 \n                <p>Contact No.</p> \n                <p>9819812456</p>\n               <p> 9833733477</p>\n               <p> 9820342389</p>\n                ")}).then((function(e){console.log(e)})))},W=function(e){(0,s.qC)(s.HQ+"/updateData",{tableName:"hotel_booking",columns:["visible"],values:[1],condition:"id="+e.data.id}).then((function(e){M(e),console.log(e)}));var n=f.filter((function(n){return n.uid==e.user.uid}));n&&n.length>0&&n[0].email&&((0,s.qC)(s.HQ+"/sendMessage",{title:"Your Booking Request has not been confirmed",body:"We had received your request for a booking on ".concat((0,s.Ny)(e.data.check_in)," for a ").concat(e.data.room," room at the ").concat(e.hotel.name,". We are very pleased to know that you want a booking with us, however, we regret to inform you that your request has NOT BEEN CONFIRMED due to non-availability of rooms or some technical reasons."),uid:n[0].uid}).then((function(e){console.log(e)})),(0,s.qC)(s.HQ+"/sendEmail",{to:n[0].email,subject:"Your Booking Request has not been confirmed - Smira Club",text:"<p>Hello ".concat(n[0].name,"</p>\n                <p>We had received your request for a booking on ").concat((0,s.Ny)(e.data.check_in)," for a ").concat(e.data.room," room at the ").concat(e.hotel.name,". We are very pleased to know that you want a booking with us, however, we regret to inform you that your request has NOT BEEN CONFIRMED due to non-availability of rooms or some technical reasons.</p>\n\n                <p>Sorry for the inconvenience. We assure you that we will be available in the future for you whenever you wish to make a booking.</p>\n\n                <p>Best Regards</p>\n                <p>Smira Club</p>\n                 \n               <p> Ranjit Studio Compound, </p>\n               <p> Ground & 1st Floor, </p>\n               <p> C-Block, Plot No. 115, </p>\n               <p> Dada Saheb Phalke Marg, </p>\n               <p> Opp. Bharatkshetra, Hindmata, </p>\n               <p> Dadar East, Mumbai, </p>\n                <p>Maharashtra 400014 </p>\n                 \n                <p>Contact No.</p> \n                <p>9819812456</p>\n               <p> 9833733477</p>\n               <p> 9820342389</p>\n                ")}).then((function(e){console.log(e)})))},Y=function(e){var n=E.filter((function(n){return n.id==e.deal.brand_id}));(0,s.qC)(s.HQ+"/setData",{auth:q.currentUser,tableName:"redeem_history",columns:["purches_type","purches_id","name","date","image","uid"],values:["deal",e.deal.id,e.deal.name,(0,s.cR)(new Date),n[0].image,e.user.uid]}).then((function(n){n.insertId&&(0,s.qC)(s.HQ+"/updateData",{tableName:"book_appointment",columns:["visible"],values:[1],condition:"id="+e.data.id}).then((function(e){M(e),console.log(e)})),console.log(n.message)}));var t=f.filter((function(n){return n.uid==e.user.uid}));t&&t.length>0&&t[0].email&&(0,s.qC)(s.HQ+"/sendEmail",{to:t[0].email,subject:"Confirmation mail for your appointment request",text:"<p>Hello ".concat(t[0].name,"</p>\n                <p>Your appointment request for <strong>").concat(e.deal.name,"</strong> is accepted by SMIRA CLUB</p>\n                <p>To know details---Call us</p>\n                <p>Best Regards</p>\n                <p>Smira Club</p>\n                 \n               <p> Ranjit Studio Compound, </p>\n               <p> Ground & 1st Floor, </p>\n               <p> C-Block, Plot No. 115, </p>\n               <p> Dada Saheb Phalke Marg, </p>\n               <p> Opp. Bharatkshetra, Hindmata, </p>\n               <p> Dadar East, Mumbai, </p>\n                <p>Maharashtra 400014 </p>\n                 \n                <p>Contact No.</p> \n                <p>9819812456</p>\n               <p> 9833733477</p>\n               <p> 9820342389</p>\n                ")}).then((function(e){console.log(e)}))},G=function(e){(0,s.qC)(s.HQ+"/updateData",{tableName:"book_appointment",columns:["visible"],values:[1],condition:"id="+e.data.id}).then((function(e){M(e),console.log(e)}));var n=f.filter((function(n){return n.uid==e.user.uid}));n&&n.length>0&&n[0].email&&(0,s.qC)(s.HQ+"/sendEmail",{to:n[0].email,subject:"Rejection mail for your appointment request",text:"<p>Hello ".concat(n[0].name,"</p>\n                <p>Your appointment request for <strong>").concat(e.deal.name,"</strong> is rejected by SMIRA CLUB due some issues.</p>\n                <p>To know details---Call us</p>\n                <p>Best Regards</p>\n                <p>Smira Club</p>\n                 \n               <p> Ranjit Studio Compound, </p>\n               <p> Ground & 1st Floor, </p>\n               <p> C-Block, Plot No. 115, </p>\n               <p> Dada Saheb Phalke Marg, </p>\n               <p> Opp. Bharatkshetra, Hindmata, </p>\n               <p> Dadar East, Mumbai, </p>\n                <p>Maharashtra 400014 </p>\n                 \n                <p>Contact No.</p> \n                <p>9819812456</p>\n               <p> 9833733477</p>\n               <p> 9820342389</p>\n                ")}).then((function(e){console.log(e)}))};return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"page-header",children:[(0,d.jsx)("h3",{className:"page-title",children:" All Orders "}),(0,d.jsx)("nav",{"aria-label":"breadcrumb",children:(0,d.jsxs)("ol",{className:"breadcrumb",children:[(0,d.jsx)("li",{className:"breadcrumb-item",children:(0,d.jsx)("a",{href:"#",onClick:function(e){return e.preventDefault()},children:"Orders"})}),(0,d.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Action"})]})})]}),(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-lg-12 grid-margin stretch-card",children:(0,d.jsx)("div",{className:"card",children:(0,d.jsxs)("div",{className:"card-body",children:[(0,d.jsx)("h4",{className:"card-title",children:"Select Type"}),(0,d.jsxs)(i.Z,{children:[(0,d.jsx)(i.Z.Toggle,{variant:"btn btn-gradient-secondary",id:"dropdownMenuOutlineButton2",children:t}),(0,d.jsxs)(i.Z.Menu,{children:[(0,d.jsx)(i.Z.Header,{children:"Order Type"}),(0,d.jsx)(i.Z.Item,{onClick:function(){h("Hotels")},children:"Hotels"}),(0,d.jsx)(i.Z.Item,{onClick:function(){h("Deals")},children:"Deals"})]})]}),(0,d.jsx)("div",{className:"table-responsive",children:(0,d.jsxs)("table",{className:"table table-striped",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:" Name "}),(0,d.jsx)("th",{children:" Phone "}),(0,d.jsxs)("th",{children:[" ",t," Name "]}),"Hotels"==t?(0,d.jsx)("th",{children:" Check In "}):(0,d.jsx)(d.Fragment,{}),"Hotels"==t?(0,d.jsx)("th",{children:" Check Out "}):(0,d.jsx)(d.Fragment,{}),"Hotels"==t?(0,d.jsx)("th",{children:" Veg "}):(0,d.jsx)(d.Fragment,{}),"Hotels"==t?(0,d.jsx)("th",{children:" Non Veg "}):(0,d.jsx)(d.Fragment,{}),"Hotels"==t?(0,d.jsx)("th",{children:" Additional Note "}):(0,d.jsx)(d.Fragment,{}),(0,d.jsx)("th",{children:"Action"})]})}),(0,d.jsx)("tbody",{children:"Hotels"==t?v.map((function(e,n){return(0,d.jsx)(u,{data:e,declineHotel:W,acceptHotel:P},n)})):H.map((function(e,n){return(0,d.jsx)(p,{data:e,declineHotel:G,acceptHotel:Y},n)}))})]})})]})})}),O.length>1?(0,d.jsx)("nav",{style:{width:"100%",overflow:"scroll"},children:(0,d.jsxs)("ul",{className:"pagination",children:[(0,d.jsx)("li",{className:"page-item",children:(0,d.jsx)("button",{onClick:function(){Z>1&&I(Z-1)},className:"page-link",children:"Previous"})}),O.map((function(e,n){return(0,d.jsx)("li",{className:Z==n+1?"page-item active":"page-item",children:(0,d.jsx)("button",{onClick:function(){I(n+1)},className:"page-link",children:n+1})},n)})),(0,d.jsx)("li",{className:"page-item",children:(0,d.jsx)("button",{onClick:function(){Z<O.length&&I(Z+1)},className:"page-link",children:"Next"})})]})}):(0,d.jsx)(d.Fragment,{})]})]})};var u=function(e){var n=e.data,t=o.useState(n.data.visible),i=(0,a.Z)(t,2),r=i[0],c=i[1];return(0,d.jsxs)("tr",{children:[(0,d.jsxs)("td",{children:[" ",n.user.name," "]}),(0,d.jsxs)("td",{children:[" ",n.user.phone," "]}),(0,d.jsx)("td",{children:n.hotel?n.hotel.name:""}),(0,d.jsxs)("td",{children:[" ",(0,s.Ny)(n.data.check_in)," "]}),(0,d.jsxs)("td",{children:[" ",(0,s.Ny)(n.data.check_out)," "]}),(0,d.jsxs)("td",{children:[" ",n.data.veg," "]}),(0,d.jsxs)("td",{children:[" ",n.data.non_veg," "]}),(0,d.jsxs)("td",{children:[" ",n.data.note," "]}),1==r?(0,d.jsx)("td",{style:{width:"200px"}}):(0,d.jsxs)("td",{children:[(0,d.jsx)("button",{onClick:function(){e.acceptHotel(n),c(1)},className:"btn btn-gradient-success btn-rounded btn-fw",children:"Accept"}),(0,d.jsx)("button",{onClick:function(){e.declineHotel(n),c(1)},style:{marginLeft:"10px"},className:"btn btn-gradient-danger btn-rounded btn-fw",children:"Cancel"})]})]})},p=function(e){var n=e.data,t=o.useState(n.data.visible),i=(0,a.Z)(t,2),r=i[0],s=i[1];return(0,d.jsxs)("tr",{children:[(0,d.jsxs)("td",{children:[" ",n.user?n.user.name:"..."," "]}),(0,d.jsxs)("td",{children:[" ",n.user?n.user.phone:"---"," "]}),(0,d.jsx)("td",{children:n.deal&&n.deal.name?n.deal.name:"..."}),1==r?(0,d.jsx)("td",{style:{width:"200px"}}):(0,d.jsxs)("td",{children:[(0,d.jsx)("button",{onClick:function(){e.acceptHotel(n),s(1)},className:"btn btn-gradient-success btn-rounded btn-fw",children:"Accept"}),(0,d.jsx)("button",{onClick:function(){e.declineHotel(n),s(1)},style:{marginLeft:"10px"},className:"btn btn-gradient-danger btn-rounded btn-fw",children:"Cancel"})]})]})}}}]);
//# sourceMappingURL=503.35d2f0b5.chunk.js.map