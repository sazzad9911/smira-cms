"use strict";(self.webpackChunkpurple_react_free=self.webpackChunkpurple_react_free||[]).push([[503],{503:function(e,n,t){t.r(n);var a=t(885),i=t(2791),s=t(3687),o=t(8687),r=t(2930),l=t(7266),d=t(3108),c=t(184);n.default=function(){var e=i.useState("Hotels"),n=(0,a.Z)(e,2),t=n[0],m=n[1],p=(0,o.v9)((function(e){return e.hotelBooking})),f=(0,o.v9)((function(e){return e.userInfo})),g=(0,o.v9)((function(e){return e.hotels})),j=(0,o.v9)((function(e){return e.deals})),x=(0,o.v9)((function(e){return e.bookAppointment})),b=i.useState([]),v=(0,a.Z)(b,2),C=v[0],k=v[1],N=i.useState([]),H=(0,a.Z)(N,2),y=H[0],_=H[1],q=(0,o.I0)(),D=(0,l.v0)(d.Z),S=i.useState(!1),B=(0,a.Z)(S,2),w=B[0],Q=B[1],R=(0,o.v9)((function(e){return e.brands})),Z=i.useState(1),A=(0,a.Z)(Z,2),E=A[0],F=A[1],M=i.useState([]),I=(0,a.Z)(M,2),P=I[0],O=I[1];i.useEffect((function(){if(g&&p&&f&&j&&x&&"Hotels"==t){var e=[];p.forEach((function(n,t){if(t<10*E&&t>=10*E-10){var a=f.filter((function(e){return e.uid==n.user_id})),i=g.filter((function(e){return e.id==n.hotel_id})),s={data:n,user:a[0],hotel:i[0]};e.push(s)}})),k(e);for(var n=p.length/10,a=parseInt(n),i=[],s=0;s<a;s++)i.push(a);n>a?(i.push(a),O(i)):O(i)}if(R&&g&&p&&f&&x&&j&&"Deals"==t){var o=[];x.forEach((function(e,n){if(n<10*E&&n>=10*E-10){var t=f.filter((function(n){return n.uid==e.uid})),a=j.filter((function(n){return n.id==e.deal_id})),i=R.filter((function(e){return e.id==a[0].brand_id})),s={data:e,user:t[0],deal:a[0],brand:i[0]};o.push(s)}})),_(o);for(var r=x.length/10,l=parseInt(r),d=[],c=0;c<l;c++)d.push(l);r>l?(d.push(l),O(d)):O(d)}}),[t+E+g+j+f+x+p+R]),i.useEffect((function(){(0,r.qC)(r.HQ+"/getData",{tableName:"hotel_booking",orderColumn:"date"}).then((function(e){if(Array.isArray(e))return q((0,r.oB)(e));console.log(e)}))}),[w]),i.useEffect((function(){(0,r.qC)(r.HQ+"/getData",{tableName:"book_appointment",orderColumn:"date"}).then((function(e){if(Array.isArray(e))return q((0,r._s)(e));console.log(e)}))}),[w]);var U=function(e){(0,r.qC)(r.HQ+"/setData",{auth:D.currentUser,tableName:"redeem_history",columns:["purches_type","purches_id","name","date","image","uid"],values:["hotel",e.data.id,e.hotel.name,(0,r.cR)(new Date),e.hotel.image,e.user.uid]}).then((function(n){n.insertId&&(0,r.qC)(r.HQ+"/updateData",{tableName:"hotel_booking",columns:["visible"],values:[1],condition:"id="+e.data.id}).then((function(e){Q(e),console.log(e)})),console.log(n.message)}));var n=f.filter((function(n){return n.uid==e.user.uid}));n&&n.length>0&&n[0].email&&((0,r.qC)(r.HQ+"/sendMessage",{title:"Booking Request Confirmed!",body:"Please check your email for your booking details at ".concat(e.hotel.name,"."),uid:n[0].uid}).then((function(e){console.log(e)})),(0,r.qC)(r.HQ+"/setData",{auth:D.currentUser,tableName:"notification",columns:["name","description","uid"],values:["Booking Request Confirmed!","Please check your email for your booking details at ".concat(e.hotel.name,"."),n[0].uid]}).then((function(e){console.log(e)})),(0,r.qC)(r.HQ+"/sendEmail",{to:n[0].email,subject:"Your Booking Request has been confirmed - Smira Club",text:(0,r.j_)(e.hotel.name,e.hotel.address,e.data.room,e.data.adult+e.data.children,e.data.children,(0,r.Ny)(e.data.check_in),(0,r.Ny)(e.data.check_out),e.data.veg,e.data.non_veg)}).then((function(e){console.log(e)})))},Y=function(e){(0,r.qC)(r.HQ+"/updateData",{tableName:"hotel_booking",columns:["visible"],values:[1],condition:"id="+e.data.id}).then((function(e){Q(e),console.log(e)}));var n=f.filter((function(n){return n.uid==e.user.uid}));n&&n.length>0&&n[0].email&&((0,r.qC)(r.HQ+"/sendMessage",{title:"Booking Request Not Confirmed.",body:"Your booking at ".concat(e.hotel.name," has not been confirmed."),uid:n[0].uid}).then((function(e){console.log(e)})),(0,r.qC)(r.HQ+"/setData",{auth:D.currentUser,tableName:"notification",columns:["name","description","uid"],values:["Booking Request Not Confirmed.","Your booking at ".concat(e.hotel.name," has not been confirmed."),n[0].uid]}).then((function(e){console.log(e)})),(0,r.qC)(r.HQ+"/sendEmail",{to:n[0].email,subject:"Your Booking Request has not been confirmed - Smira Club",text:(0,r.S7)(e.hotel.name,e.hotel.address,e.data.room,e.data.adult+e.data.children,e.data.children,(0,r.Ny)(e.data.check_in),(0,r.Ny)(e.data.check_out),e.data.veg,e.data.non_veg)}).then((function(e){console.log(e)})))},T=function(e){var n=R.filter((function(n){return n.id==e.deal.brand_id}));(0,r.qC)(r.HQ+"/setData",{auth:D.currentUser,tableName:"redeem_history",columns:["purches_type","purches_id","name","date","image","uid"],values:["deal",e.data.id,e.deal.name,(0,r.cR)(new Date),n[0].image,e.user.uid]}).then((function(n){n.insertId&&(0,r.qC)(r.HQ+"/updateData",{tableName:"book_appointment",columns:["visible"],values:[1],condition:"id="+e.data.id}).then((function(e){Q(e),console.log(e)})),console.log(n.message)}));var t=f.filter((function(n){return n.uid==e.user.uid}));t&&t.length>0&&t[0].email&&(0,r.qC)(r.HQ+"/sendEmail",{to:t[0].email,subject:"Confirmation mail for your appointment request",text:"<p>Hello ".concat(t[0].name,"</p>\n                <p>Your appointment request for <strong>").concat(e.deal.name,"</strong> is accepted by SMIRA CLUB</p>\n                <p>To know details---Call us</p>\n                <p>Best Regards</p>\n                <p>Smira Club</p>\n                 \n               <p> Ranjit Studio Compound, </p>\n               <p> Ground & 1st Floor, </p>\n               <p> C-Block, Plot No. 115, </p>\n               <p> Dada Saheb Phalke Marg, </p>\n               <p> Opp. Bharatkshetra, Hindmata, </p>\n               <p> Dadar East, Mumbai, </p>\n                <p>Maharashtra 400014 </p>\n                 \n                <p>Contact No.</p> \n                <p>9819812456</p>\n               <p> 9833733477</p>\n               <p> 9820342389</p>\n                ")}).then((function(e){console.log(e)}))},L=function(e){(0,r.qC)(r.HQ+"/updateData",{tableName:"book_appointment",columns:["visible"],values:[1],condition:"id="+e.data.id}).then((function(e){Q(e),console.log(e)}));var n=f.filter((function(n){return n.uid==e.user.uid}));n&&n.length>0&&n[0].email&&(0,r.qC)(r.HQ+"/sendEmail",{to:n[0].email,subject:"Rejection mail for your appointment request",text:"<p>Hello ".concat(n[0].name,"</p>\n                <p>Your appointment request for <strong>").concat(e.deal.name,"</strong> is rejected by SMIRA CLUB due some issues.</p>\n                <p>To know details---Call us</p>\n                <p>Best Regards</p>\n                <p>Smira Club</p>\n                 \n               <p> Ranjit Studio Compound, </p>\n               <p> Ground & 1st Floor, </p>\n               <p> C-Block, Plot No. 115, </p>\n               <p> Dada Saheb Phalke Marg, </p>\n               <p> Opp. Bharatkshetra, Hindmata, </p>\n               <p> Dadar East, Mumbai, </p>\n                <p>Maharashtra 400014 </p>\n                 \n                <p>Contact No.</p> \n                <p>9819812456</p>\n               <p> 9833733477</p>\n               <p> 9820342389</p>\n                ")}).then((function(e){console.log(e)}))};return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"page-header",children:[(0,c.jsx)("h3",{className:"page-title",children:" All Orders "}),(0,c.jsx)("nav",{"aria-label":"breadcrumb",children:(0,c.jsxs)("ol",{className:"breadcrumb",children:[(0,c.jsx)("li",{className:"breadcrumb-item",children:(0,c.jsx)("a",{href:"#",onClick:function(e){return e.preventDefault()},children:"Orders"})}),(0,c.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Action"})]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-lg-12 grid-margin stretch-card",children:(0,c.jsx)("div",{className:"card",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("h4",{className:"card-title",children:"Select Type"}),(0,c.jsxs)(s.Z,{children:[(0,c.jsx)(s.Z.Toggle,{variant:"btn btn-gradient-secondary",id:"dropdownMenuOutlineButton2",children:t}),(0,c.jsxs)(s.Z.Menu,{children:[(0,c.jsx)(s.Z.Header,{children:"Order Type"}),(0,c.jsx)(s.Z.Item,{onClick:function(){m("Hotels")},children:"Hotels"}),(0,c.jsx)(s.Z.Item,{onClick:function(){m("Deals")},children:"Deals"})]})]}),(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-striped",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:" Name "}),(0,c.jsx)("th",{children:" Email "}),(0,c.jsx)("th",{children:" Phone "}),(0,c.jsx)("th",{children:"Date"}),(0,c.jsxs)("th",{children:[" ",t," Name "]}),"Hotels"==t?(0,c.jsx)("th",{children:" Check In "}):(0,c.jsx)(c.Fragment,{}),"Hotels"==t?(0,c.jsx)("th",{children:" Check Out "}):(0,c.jsx)(c.Fragment,{}),"Hotels"==t?(0,c.jsx)("th",{children:" Adults "}):(0,c.jsx)(c.Fragment,{}),"Hotels"==t?(0,c.jsx)("th",{children:" Children "}):(0,c.jsx)(c.Fragment,{}),"Hotels"==t?(0,c.jsx)("th",{children:" Room "}):(0,c.jsx)(c.Fragment,{}),"Hotels"==t?(0,c.jsx)("th",{children:" Veg "}):(0,c.jsx)(c.Fragment,{}),"Hotels"==t?(0,c.jsx)("th",{children:" Non Veg "}):(0,c.jsx)(c.Fragment,{}),"Hotels"==t?(0,c.jsx)("th",{children:" Additional Note "}):(0,c.jsx)(c.Fragment,{}),"Hotels"!=t?(0,c.jsx)("th",{children:" Brand Name "}):(0,c.jsx)(c.Fragment,{}),(0,c.jsx)("th",{children:"Action"})]})}),(0,c.jsx)("tbody",{children:"Hotels"==t?C.map((function(e,n){return(0,c.jsx)(u,{data:e,declineHotel:Y,acceptHotel:U},n)})):y.map((function(e,n){return(0,c.jsx)(h,{data:e,declineHotel:L,acceptHotel:T},n)}))})]})})]})})}),P.length>1?(0,c.jsx)("nav",{style:{width:"100%",overflow:"scroll"},children:(0,c.jsxs)("ul",{className:"pagination",children:[(0,c.jsx)("li",{className:"page-item",children:(0,c.jsx)("button",{onClick:function(){E>1&&F(E-1)},className:"page-link",children:"Previous"})}),P.map((function(e,n){return(0,c.jsx)("li",{className:E==n+1?"page-item active":"page-item",children:(0,c.jsx)("button",{onClick:function(){F(n+1)},className:"page-link",children:n+1})},n)})),(0,c.jsx)("li",{className:"page-item",children:(0,c.jsx)("button",{onClick:function(){E<P.length&&F(E+1)},className:"page-link",children:"Next"})})]})}):(0,c.jsx)(c.Fragment,{})]})]})};var u=function(e){var n=e.data,t=i.useState(n.data.visible),s=(0,a.Z)(t,2),o=s[0],l=s[1];return(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{children:[" ",n.user.name," "]}),(0,c.jsxs)("td",{children:[" ",n.user.email," "]}),(0,c.jsxs)("td",{children:[" ",n.user.phone," "]}),(0,c.jsxs)("td",{children:[(0,r.Ny)(n.data.date)," "]}),(0,c.jsx)("td",{children:n.hotel?n.hotel.name:""}),(0,c.jsxs)("td",{children:[" ",(0,r.Ny)(n.data.check_in)," "]}),(0,c.jsxs)("td",{children:[" ",(0,r.Ny)(n.data.check_out)," "]}),(0,c.jsxs)("td",{children:[" ",n.data.adult," "]}),(0,c.jsxs)("td",{children:[" ",n.data.children," "]}),(0,c.jsxs)("td",{children:[" ",n.data.room," "]}),(0,c.jsxs)("td",{children:[" ",n.data.veg," "]}),(0,c.jsxs)("td",{children:[" ",n.data.non_veg," "]}),(0,c.jsxs)("td",{children:[" ",n.data.note," "]}),1==o?(0,c.jsx)("td",{style:{width:"200px"}}):(0,c.jsxs)("td",{children:[(0,c.jsx)("button",{onClick:function(){e.acceptHotel(n),l(1)},className:"btn btn-gradient-success btn-rounded btn-fw",children:"Accept"}),(0,c.jsx)("button",{onClick:function(){e.declineHotel(n),l(1)},style:{marginLeft:"10px"},className:"btn btn-gradient-danger btn-rounded btn-fw",children:"Cancel"})]})]})},h=function(e){var n=e.data,t=i.useState(n.data.visible),s=(0,a.Z)(t,2),o=s[0],l=s[1];return(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{children:[" ",n.user?n.user.name:"..."," "]}),(0,c.jsxs)("td",{children:[" ",n.user.email," "]}),(0,c.jsxs)("td",{children:[" ",n.user?n.user.phone:"---"," "]}),(0,c.jsxs)("td",{children:[(0,r.Ny)(n.data.date)," "]}),(0,c.jsx)("td",{children:n.deal&&n.deal.name?n.deal.name:"..."}),(0,c.jsx)("td",{children:n.brand&&n.brand.name?n.brand.name:"..."}),1==o?(0,c.jsx)("td",{style:{width:"200px"}}):(0,c.jsxs)("td",{children:[(0,c.jsx)("button",{onClick:function(){e.acceptHotel(n),l(1)},className:"btn btn-gradient-success btn-rounded btn-fw",children:"Accept"}),(0,c.jsx)("button",{onClick:function(){e.declineHotel(n),l(1)},style:{marginLeft:"10px"},className:"btn btn-gradient-danger btn-rounded btn-fw",children:"Cancel"})]})]})}}}]);
//# sourceMappingURL=503.cef2572e.chunk.js.map