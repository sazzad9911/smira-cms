/*! For license information please see 4594.1537c84e.chunk.js.LICENSE.txt */
(self.webpackChunkpurple_react_free=self.webpackChunkpurple_react_free||[]).push([[4594],{4594:function(e,a,l){"use strict";l.r(a);var r=l(885),t=l(2791),n=l(4912),s=(l(6016),l(4569),l(2930)),o=l(7266),c=l(3108),i=l(184);a.default=function(){var e=t.useState(new Date),a=(0,r.Z)(e,2),l=(a[0],a[1],t.useState()),u=(0,r.Z)(l,2),d=u[0],m=u[1],h=t.useState(),f=(0,r.Z)(h,2),b=f[0],p=(f[1],t.useState()),v=(0,r.Z)(p,2),x=v[0],N=v[1],g=t.useState(),j=(0,r.Z)(g,2),S=(j[0],j[1],t.useState()),y=(0,r.Z)(S,2),C=(y[0],y[1],t.useState("")),w=(0,r.Z)(C,2),E=w[0],Z=w[1],M=(0,o.v0)(c.Z),I=t.useState(!1),A=(0,r.Z)(I,2),F=(A[0],A[1],t.useState()),T=(0,r.Z)(F,2),P=(T[0],T[1],t.useState()),L=(0,r.Z)(P,2),q=L[0],O=L[1],D=t.useState(),k=(0,r.Z)(D,2),R=k[0],U=k[1],G=t.useState("non"),H=(0,r.Z)(G,2),_=H[0],B=H[1],Q=t.useState(),W=(0,r.Z)(Q,2),X=W[0],Y=W[1],V=t.useState(),z=(0,r.Z)(V,2),J=z[0],K=z[1],$=t.useState(),ee=(0,r.Z)($,2),ae=ee[0],le=ee[1];function re(e){for(var a="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=l.length,t=0;t<e;t++)a+=l.charAt(Math.floor(Math.random()*r));return a}t.useEffect((function(){(0,s.qC)(s.HQ+"/getData",{tableName:"membership"}).then((function(e){if(Array.isArray(e)&&e.length>0)return U(e);console.log(e.message)}))}));return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"page-header",children:[(0,i.jsx)("h3",{className:"page-title",children:" Add Member "}),(0,i.jsx)("nav",{"aria-label":"breadcrumb",children:(0,i.jsxs)("ol",{className:"breadcrumb",children:[(0,i.jsx)("li",{className:"breadcrumb-item",children:(0,i.jsx)("a",{href:"!#",onClick:function(e){return e.preventDefault()},children:"Member"})}),(0,i.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Add"})]})})]}),(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-12 grid-margin",children:(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h4",{className:"card-title",children:"Information"}),(0,i.jsxs)("form",{className:"form-sample",children:[(0,i.jsx)("p",{className:"card-description",children:" Add new member "}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)(n.Z.Group,{className:"row",children:[(0,i.jsx)("label",{className:"col-sm-3 col-form-label",children:"Name"}),(0,i.jsx)("div",{className:"col-sm-9",children:(0,i.jsx)(n.Z.Control,{onChange:function(e){return m(e.target.value)},placeholder:"Member name",type:"text"})})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)(n.Z.Group,{className:"row",children:[(0,i.jsx)("label",{className:"col-sm-3 col-form-label",children:"Select Plan"}),(0,i.jsx)("div",{className:"col-sm-9",children:(0,i.jsxs)("select",{value:_,onChange:function(e){le(R.filter((function(a){return a.type==e.target.value}))[0]),B(e.target.value)},className:"form-control",children:[(0,i.jsx)("option",{value:"non",children:"Non Member"}),R?R.map((function(e,a){return(0,i.jsx)("option",{value:e.type,children:e.name},a)})):(0,i.jsx)("option",{children:"Select one"})]})})]})})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)(n.Z.Group,{className:"row",children:[(0,i.jsx)("label",{className:"col-sm-3 col-form-label",children:"phone"==b?"Phone":"Email"}),(0,i.jsx)("div",{className:"col-sm-9",children:(0,i.jsx)(n.Z.Control,{onChange:function(e){return N(e.target.value)},placeholder:"eg. someone@gmail.com",type:"email"})})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)(n.Z.Group,{className:"row",children:[(0,i.jsx)("label",{className:"col-sm-3 col-form-label",children:"Password "}),(0,i.jsx)("div",{className:"col-sm-9",children:(0,i.jsx)(n.Z.Control,{onChange:function(e){O(e.target.value)},name:"file",type:"text"})})]})})]}),"non"!=_?(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)(n.Z.Group,{className:"row",children:[(0,i.jsx)("label",{className:"col-sm-3 col-form-label",children:"Starting Date"}),(0,i.jsx)("div",{className:"col-sm-9",children:(0,i.jsx)(n.Z.Control,{onChange:function(e){return Y(e.target.value)},placeholder:"",type:"date"})})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)(n.Z.Group,{className:"row",children:[(0,i.jsx)("label",{className:"col-sm-3 col-form-label",children:"Ending Date"}),(0,i.jsx)("div",{className:"col-sm-9",children:(0,i.jsx)(n.Z.Control,{onChange:function(e){return K(e.target.value)},placeholder:"",type:"date"})})]})})]}):(0,i.jsx)(i.Fragment,{})]}),E?(0,i.jsx)("div",{className:"alert alert-primary",role:"alert",children:E}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)("button",{onClick:function(){if(d&&x&&q)if(q.length<6)Z("Password must be at least 6 characters");else{if(_)return"non"==_?(Z("Please wait..."),void(0,o.Xb)(M,x,q).then((function(e){(0,s.qC)(s.HQ+"/setData",{auth:e.user,tableName:"user",columns:["name","email","uid"],values:[d,x,e.user.uid]}).then((function(e){Z("Successful! Member has added successfully.")})).catch((function(e){Z("Network request failed. There some issue. Please contact with developer."),console.log(e.message)}))})).catch((function(e){Z("Invalid email/password or your email has already used"),console.log(e.message)}))):void(X&&J?ae?(Z("Please wait..."),(0,o.Xb)(M,x,q).then((function(e){(0,s.qC)(s.HQ+"/setData",{auth:e.user,tableName:"user",columns:["name","email","uid","membership_type","starting_date","ending_date"],values:[d,x,e.user.uid,_,(0,s.cR)(new Date(X)),(0,s.cR)(new Date(J))]}).then((function(e){Z("Successful! Member has added successfully.")})).catch((function(e){Z("Network request failed. There some issue. Please contact with developer."),console.log(e.message)}));var a=null;if("no"!=ae.account)for(var l=parseInt(ae.account),r=0;r<l;){var t=re(16);a=a?a+", '"+t+"'":"'"+t+"'",(0,s.qC)(s.HQ+"/setData",{auth:e.user,tableName:"family_code",columns:["code","buyer_id"],values:[t,e.user.uid]}).then((function(e){console.log(e)})),r++}var n=a?"Your Family Access Code is ".concat(a," (If applicable)"):"";(0,s.qC)(s.HQ+"/sendEmail",{from:"info@smira.club",to:x,subject:"You\u2019re now officially a member of our family - Smira Club",text:"\n              <p>Dear <strong>".concat(d,"</strong>,</p>\n              <p>Welcome to Smira Club. We\u2019re thrilled to see you here!</p>\n              <p>Congratulations! <br>\n              Membership Type:<strong> ").concat(ae.name," </strong><br>\n              Total Days: <strong>").concat((0,s.ri)(X,J)," </strong><br>\n              <p>We\u2019re confident that membership will help you save more money while enjoying the luxuries of our services. </p>\n              <p>").concat(n,"</p>\n              <p>Best regards, <br>\n                Smira Club</p>\n\n              <b>Smira Services - \u2018A sweet memory is really affordable\u2019 </b>\n\n\n              <p><b>Smira Sevices Pvt. Ltd. </b><br>\n             Ranjit Studio Compound, <br>\n              Ground & 1st Floor, <br>\n              M-Block, Plot No. 115, <br>\n              Dada Saheb Phalke Marg, <br>\n              Opp. Bharatkshetra, Hindmata, <br>\n              Dadar East, Mumbai, <br>\n              Maharashtra 400014 </p>\n\n              <p><b>Contact No. </b><br>\n              9833733477<br>\n              9833733977<br>\n              Email - support@smira.club</p>\n              ")}).then((function(e){console.log(e)}))})).catch((function(e){Z("Invalid email/password or your email has already used"),console.log(e.message)}))):Z("Membership is required"):Z("Date fields are invalid"));Z("Invalid selection")}else Z("Please fill all the required fields")},className:"btn btn-gradient-secondary btn-rounded btn-fw",children:"SAVE"})]})})})})]})}},6016:function(e){e.exports=function(){"use strict";var e={CUSTOMFILE:'.custom-file input[type="file"]',CUSTOMFILELABEL:".custom-file-label",FORM:"form",INPUT:"input"},a=3,l=function(a){var l="",r=a.parentNode.querySelector(e.CUSTOMFILELABEL);return r&&(l=r.textContent),l},r=function(e){if(e.childNodes.length>0)for(var l=[].slice.call(e.childNodes),r=0;r<l.length;r++){var t=l[r];if(t.nodeType!==a)return t}return e},t=function(a){var l=a.bsCustomFileInput.defaultText,t=a.parentNode.querySelector(e.CUSTOMFILELABEL);t&&(r(t).textContent=l)},n=!!window.File,s="fakepath",o="\\",c=function(e){if(e.hasAttribute("multiple")&&n)return[].slice.call(e.files).map((function(e){return e.name})).join(", ");if(-1!==e.value.indexOf(s)){var a=e.value.split(o);return a[a.length-1]}return e.value};function i(){var a=this.parentNode.querySelector(e.CUSTOMFILELABEL);if(a){var l=r(a),n=c(this);n.length?l.textContent=n:t(this)}}function u(){for(var a=[].slice.call(this.querySelectorAll(e.INPUT)).filter((function(e){return!!e.bsCustomFileInput})),l=0,r=a.length;l<r;l++)t(a[l])}var d="bsCustomFileInput",m={FORMRESET:"reset",INPUTCHANGE:"change"};return{init:function(a,r){void 0===a&&(a=e.CUSTOMFILE),void 0===r&&(r=e.FORM);for(var t=[].slice.call(document.querySelectorAll(a)),n=[].slice.call(document.querySelectorAll(r)),s=0,o=t.length;s<o;s++){var c=t[s];Object.defineProperty(c,d,{value:{defaultText:l(c)},writable:!0}),i.call(c),c.addEventListener(m.INPUTCHANGE,i)}for(var h=0,f=n.length;h<f;h++)n[h].addEventListener(m.FORMRESET,u),Object.defineProperty(n[h],d,{value:!0,writable:!0})},destroy:function(){for(var a=[].slice.call(document.querySelectorAll(e.FORM)).filter((function(e){return!!e.bsCustomFileInput})),l=[].slice.call(document.querySelectorAll(e.INPUT)).filter((function(e){return!!e.bsCustomFileInput})),r=0,n=l.length;r<n;r++){var s=l[r];t(s),s[d]=void 0,s.removeEventListener(m.INPUTCHANGE,i)}for(var o=0,c=a.length;o<c;o++)a[o].removeEventListener(m.FORMRESET,u),a[o][d]=void 0}}}()}}]);
//# sourceMappingURL=4594.1537c84e.chunk.js.map