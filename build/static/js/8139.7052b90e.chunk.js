"use strict";(self.webpackChunkpurple_react_free=self.webpackChunkpurple_react_free||[]).push([[8139],{8139:function(e,a,n){n.r(a);var s=n(885),r=n(2791),t=n(9271),c=n(2930),l=n(4912),i=n(7266),o=n(3108),d=n(184);a.default=function(){var e=(0,i.v0)(o.Z),a=(0,t.UO)().uid,n=r.useState(null),u=(0,s.Z)(n,2),m=(u[0],u[1]),h=r.useState(),f=(0,s.Z)(h,2),p=f[0],g=f[1],b=r.useState(),j=(0,s.Z)(b,2),x=j[0],N=j[1],v=r.useState(),y=(0,s.Z)(v,2),_=y[0],C=y[1];r.useEffect((function(){(0,c.qC)(c.HQ+"/getData",{tableName:"user",condition:"uid='".concat(a,"'")}).then((function(e){if(Array.isArray(e)&&e.length>0)return e[0].membership_type?C(e[0].membership_type):C("non"),m(e);console.log(e.message)}))}),[a]),r.useEffect((function(){(0,c.qC)(c.HQ+"/getData",{tableName:"membership"}).then((function(e){if(Array.isArray(e)&&e.length>0)return N(e);console.log(e.message)}))}));return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"page-header",children:[(0,d.jsx)("h3",{className:"page-title",children:" Change Membership Plan "}),(0,d.jsx)("nav",{"aria-label":"breadcrumb",children:(0,d.jsxs)("ol",{className:"breadcrumb",children:[(0,d.jsx)("li",{className:"breadcrumb-item",children:(0,d.jsx)("a",{href:"!#",onClick:function(e){return e.preventDefault()},children:"Plans"})}),(0,d.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Add"})]})})]}),(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-12 grid-margin",children:(0,d.jsx)("div",{className:"card",children:(0,d.jsxs)("div",{className:"card-body",children:[(0,d.jsx)("h4",{className:"card-title",children:"Information"}),(0,d.jsxs)("form",{className:"form-sample",children:[(0,d.jsx)("p",{className:"card-description",children:"Edit plans and offer "}),(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsxs)(l.Z.Group,{className:"row",children:[(0,d.jsx)("label",{className:"col-sm-3 col-form-label",children:"Select Plan"}),(0,d.jsx)("div",{className:"col-sm-9",children:(0,d.jsxs)("select",{value:_,onChange:function(e){C(e.target.value)},className:"form-control",children:[(0,d.jsx)("option",{value:"non",children:"Non Member"}),x?x.map((function(e,a){return(0,d.jsx)("option",{value:e.type,children:e.name},a)})):(0,d.jsx)("option",{children:"Select one"})]})})]})})}),p?(0,d.jsx)("div",{className:"alert alert-primary",role:"alert",children:p}):(0,d.jsx)(d.Fragment,{})]}),(0,d.jsx)("button",{onClick:function(){if(x)if(_)if("non"==_)(0,c.qC)(c.HQ+"/query",{query:"UPDATE user SET membership_type=NULL,starting_date=NULL,ending_date=NULL WHERE uid='".concat(a,"'")}).then((function(e){if(e.affectedRows)return g("Membership plan change successfully completed");g(e.message),console.log(e)}));else{var n=x.filter((function(e){return e.type==_}))[0].time,s=new Date,r="".concat(s.getFullYear(),"-").concat(s.getMonth()+1,"-").concat(s.getDate()),t="".concat(s.getFullYear()+n,"-").concat(s.getMonth()+1,"-").concat(s.getDate());(0,c.qC)(c.HQ+"/updateData",{auth:e.currentUser,tableName:"user",columns:["membership_type","starting_date","ending_date"],values:[_,r,t],condition:"uid='".concat(a,"'")}).then((function(e){if(e.affectedRows)return g("Membership plan change successfully completed");g(e.message)}))}else g("Invalid selection.");else g("Error loading membership plans")},className:"btn btn-gradient-secondary btn-rounded btn-fw",children:"SAVE"})]})})})})]})}}}]);
//# sourceMappingURL=8139.7052b90e.chunk.js.map