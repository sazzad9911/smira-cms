"use strict";(self.webpackChunkpurple_react_free=self.webpackChunkpurple_react_free||[]).push([[503],{503:function(e,n,t){t.r(n);var a=t(885),o=t(2791),i=t(3687),r=t(8687),s=t(2930),l=t(7266),c=t(3108),d=t(184);n.default=function(){var e=o.useState("Hotels"),n=(0,a.Z)(e,2),t=n[0],h=n[1],m=(0,r.v9)((function(e){return e.hotelBooking})),b=(0,r.v9)((function(e){return e.userInfo})),f=(0,r.v9)((function(e){return e.hotels})),g=(0,r.v9)((function(e){return e.deals})),j=(0,r.v9)((function(e){return e.bookAppointment})),x=o.useState([]),k=(0,a.Z)(x,2),v=k[0],C=k[1],N=o.useState([]),y=(0,a.Z)(N,2),H=y[0],S=y[1],w=(0,r.I0)(),_=(0,l.v0)(c.Z),q=o.useState(!1),B=(0,a.Z)(q,2),D=B[0],M=B[1],E=(0,r.v9)((function(e){return e.brands})),R=o.useState(1),A=(0,a.Z)(R,2),F=A[0],Q=A[1],Z=o.useState([]),P=(0,a.Z)(Z,2),I=P[0],O=P[1];o.useEffect((function(){if(f&&m&&b&&g&&j&&"Hotels"==t){var e=[];m.forEach((function(n,t){if(t<10*F&&t>=10*F-10){var a=b.filter((function(e){return e.uid==n.user_id})),o=f.filter((function(e){return e.id==n.hotel_id})),i={data:n,user:a[0],hotel:o[0]};e.push(i)}})),C(e);for(var n=m.length/10,a=parseInt(n),o=[],i=0;i<a;i++)o.push(a);n>a?(o.push(a),O(o)):O(o)}if(E&&f&&m&&b&&j&&g&&"Deals"==t){var r=[];j.forEach((function(e,n){if(n<10*F&&n>=10*F-10){var t=b.filter((function(n){return n.uid==e.uid})),a=g.filter((function(n){return n.id==e.deal_id})),o=E.filter((function(e){return e.id==a[0].brand_id})),i={data:e,user:t[0],deal:a[0],brand:o[0]};r.push(i)}})),S(r);for(var s=j.length/10,l=parseInt(s),c=[],d=0;d<l;d++)c.push(l);s>l?(c.push(l),O(c)):O(c)}}),[t+F+f+g+b+j+m+E]),o.useEffect((function(){(0,s.qC)(s.HQ+"/getData",{tableName:"hotel_booking",orderColumn:"date"}).then((function(e){if(Array.isArray(e))return w((0,s.oB)(e));console.log(e)}))}),[D]),o.useEffect((function(){(0,s.qC)(s.HQ+"/getData",{tableName:"book_appointment",orderColumn:"date"}).then((function(e){if(Array.isArray(e))return w((0,s._s)(e));console.log(e)}))}),[D]);var T=function(e){(0,s.qC)(s.HQ+"/setData",{auth:_.currentUser,tableName:"redeem_history",columns:["purches_type","purches_id","name","date","image","uid"],values:["hotel",e.data.id,e.hotel.name,(0,s.cR)(new Date),e.hotel.image,e.user.uid]}).then((function(n){n.insertId&&(0,s.qC)(s.HQ+"/updateData",{tableName:"hotel_booking",columns:["visible"],values:[1],condition:"id="+e.data.id}).then((function(e){M(e),console.log(e)})),console.log(n.message)}));var n=b.filter((function(n){return n.uid==e.user.uid}));n&&n.length>0&&n[0].email&&((0,s.qC)(s.HQ+"/sendMessage",{title:"Booking Request Confirmed!",body:"Please check your email for your booking details at ".concat(e.hotel.name,"."),uid:n[0].uid}).then((function(e){console.log(e)})),(0,s.qC)(s.HQ+"/setData",{auth:_.currentUser,tableName:"notification",columns:["name","description","uid"],values:["Booking Request Confirmed!","Please check your email for your booking details at ".concat(e.hotel.name,"."),n[0].uid]}).then((function(e){console.log(e)})),(0,s.qC)(s.HQ+"/sendEmail",{to:n[0].email,subject:"Your Booking Request has been confirmed - Smira Club",text:"<p>Hello <b> ".concat(n[0].name,"</b></p>\n                <p>This email is to confirm your booking at-</p> \n\n               <p>Hotel name: ").concat(e.hotel.name,"</p>\n               <p> Hotel location: ").concat(e.hotel.address,"</p>\n               <p> Total number of guests: ").concat(e.data.adult+e.data.children,"</p>\n               <p>Number of kids below 5 years: ").concat(e.data.children," </p>\n               <p>Number of rooms: ").concat(e.data.room,"</p>\n               <p> Food (Breakfast and Dinner unlimited): <b>").concat(e.data.veg,"</b> Veg, ").concat(e.data.non_veg," Non-Veg</p>\n               <p> Amenities: <b>").concat(e.hotel.conditions,"</b></p>\n               <p>Check-in date: ").concat((0,s.Ny)(e.data.check_in),"</p>\n               <p> Check-out date: ").concat((0,s.Ny)(e.data.check_out),"</p>\n                \n                <p>If you have any inquiries, please do not hesitate to contact us.</p>\n                \n               <p> We are looking forward to your visit and hope that you enjoy your stay.</p>\n                \n                \n               <p> Best regards, </p>\n               <p> Smira Club</p>\n                 \n               <b> Smira Services - \u2018A sweet memory is really affordable\u2019 </b>\n                 \n                 \n                 \n                 \n                <b>Smira Sevices Pvt. Ltd. </b>\n                <p>Ranjit Studio Compound, </p>\n               <p> Ground & 1st Floor, </p>\n               <p> M-Block, Plot No. 115, </p>\n               <p> Dada Saheb Phalke Marg, </p>\n               <p>  Opp. Bharatkshetra, Hindmata, </p>\n               <p> Dadar East, Mumbai, </p>\n               <p> Maharashtra 400014 </p>\n                 \n               <b> Contact No. </b>\n               <p> 9833733477</p>\n               <p>9833733977</p>\n               <p> Email - support@smira.club</p>\n                ")}).then((function(e){console.log(e)})))},L=function(e){(0,s.qC)(s.HQ+"/updateData",{tableName:"hotel_booking",columns:["visible"],values:[1],condition:"id="+e.data.id}).then((function(e){M(e),console.log(e)}));var n=b.filter((function(n){return n.uid==e.user.uid}));n&&n.length>0&&n[0].email&&((0,s.qC)(s.HQ+"/sendMessage",{title:"Booking Request Not Confirmed.",body:"Your booking at ".concat(e.hotel.name," has not been confirmed."),uid:n[0].uid}).then((function(e){console.log(e)})),(0,s.qC)(s.HQ+"/setData",{auth:_.currentUser,tableName:"notification",columns:["name","description","uid"],values:["Booking Request Not Confirmed.","Your booking at ".concat(e.hotel.name," has not been confirmed."),n[0].uid]}).then((function(e){console.log(e)})),(0,s.qC)(s.HQ+"/sendEmail",{to:n[0].email,subject:"Your Booking Request has not been confirmed - Smira Club",text:"<p>Hello <b>".concat(n[0].name,"</b>,</p>\n                <p>We had received your request for a booking at- \n                <p>Hotel location: ").concat(e.hotel.address,"</p>\n                <p>Total number of guests: ").concat(e.data.adult+e.data.children," </p>\n                <p>Number of kids below 5 years: ").concat(e.data.children,"</p>\n                <p>Number of rooms: ").concat(e.data.room,"</p>\n                <p>Check-in date: ").concat((0,s.Ny)(e.data.check_in),"</p>\n                <p>Check-out date: ").concat((0,s.Ny)(e.data.check_out),"</p>\n                <p>We are very pleased to know that you want a booking with us, however, we regret to inform you that your request has <b>NOT BEEN CONFIRMED</b> due to non-availability of rooms or some technical reasons.</p>\n                <p>Sorry for the inconvenience! We assure you that we will be available in the future for you whenever you wish to make a booking.</p>\n                <p>Best regards, \n                <p>Smira Club\n                <b>Smira Services - \u2018A sweet memory is really affordable\u2019 </b>\n                <p>Smira Services Pvt. Ltd. </p>\n                <p>Ranjit Studio Compound, </p>\n                <p>Ground & 1st Floor, </p>\n                <p>M-Block, Plot No. 115, </p>\n                <p>Dada Saheb Phalke Marg, </p>\n                <p>Opp. Bharatkshetra, Hindmata,</p> \n                <p>Dadar East, Mumbai, </p>\n                <p>Maharashtra 400014 </p>\n \n                <b>Contact No.</b> \n                <p>9833733477</p>\n                <p>9833733977</p>\n                <p>Email - support@smira.club</p>\n                ")}).then((function(e){console.log(e)})))},U=function(e){var n=E.filter((function(n){return n.id==e.deal.brand_id}));(0,s.qC)(s.HQ+"/setData",{auth:_.currentUser,tableName:"redeem_history",columns:["purches_type","purches_id","name","date","image","uid"],values:["deal",e.data.id,e.deal.name,(0,s.cR)(new Date),n[0].image,e.user.uid]}).then((function(n){n.insertId&&(0,s.qC)(s.HQ+"/updateData",{tableName:"book_appointment",columns:["visible"],values:[1],condition:"id="+e.data.id}).then((function(e){M(e),console.log(e)})),console.log(n.message)}));var t=b.filter((function(n){return n.uid==e.user.uid}));t&&t.length>0&&t[0].email&&(0,s.qC)(s.HQ+"/sendEmail",{to:t[0].email,subject:"Confirmation mail for your appointment request",text:"<p>Hello ".concat(t[0].name,"</p>\n                <p>Your appointment request for <strong>").concat(e.deal.name,"</strong> is accepted by SMIRA CLUB</p>\n                <p>To know details---Call us</p>\n                <p>Best Regards</p>\n                <p>Smira Club</p>\n                 \n               <p> Ranjit Studio Compound, </p>\n               <p> Ground & 1st Floor, </p>\n               <p> C-Block, Plot No. 115, </p>\n               <p> Dada Saheb Phalke Marg, </p>\n               <p> Opp. Bharatkshetra, Hindmata, </p>\n               <p> Dadar East, Mumbai, </p>\n                <p>Maharashtra 400014 </p>\n                 \n                <p>Contact No.</p> \n                <p>9819812456</p>\n               <p> 9833733477</p>\n               <p> 9820342389</p>\n                ")}).then((function(e){console.log(e)}))},Y=function(e){(0,s.qC)(s.HQ+"/updateData",{tableName:"book_appointment",columns:["visible"],values:[1],condition:"id="+e.data.id}).then((function(e){M(e),console.log(e)}));var n=b.filter((function(n){return n.uid==e.user.uid}));n&&n.length>0&&n[0].email&&(0,s.qC)(s.HQ+"/sendEmail",{to:n[0].email,subject:"Rejection mail for your appointment request",text:"<p>Hello ".concat(n[0].name,"</p>\n                <p>Your appointment request for <strong>").concat(e.deal.name,"</strong> is rejected by SMIRA CLUB due some issues.</p>\n                <p>To know details---Call us</p>\n                <p>Best Regards</p>\n                <p>Smira Club</p>\n                 \n               <p> Ranjit Studio Compound, </p>\n               <p> Ground & 1st Floor, </p>\n               <p> C-Block, Plot No. 115, </p>\n               <p> Dada Saheb Phalke Marg, </p>\n               <p> Opp. Bharatkshetra, Hindmata, </p>\n               <p> Dadar East, Mumbai, </p>\n                <p>Maharashtra 400014 </p>\n                 \n                <p>Contact No.</p> \n                <p>9819812456</p>\n               <p> 9833733477</p>\n               <p> 9820342389</p>\n                ")}).then((function(e){console.log(e)}))};return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"page-header",children:[(0,d.jsx)("h3",{className:"page-title",children:" All Orders "}),(0,d.jsx)("nav",{"aria-label":"breadcrumb",children:(0,d.jsxs)("ol",{className:"breadcrumb",children:[(0,d.jsx)("li",{className:"breadcrumb-item",children:(0,d.jsx)("a",{href:"#",onClick:function(e){return e.preventDefault()},children:"Orders"})}),(0,d.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Action"})]})})]}),(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-lg-12 grid-margin stretch-card",children:(0,d.jsx)("div",{className:"card",children:(0,d.jsxs)("div",{className:"card-body",children:[(0,d.jsx)("h4",{className:"card-title",children:"Select Type"}),(0,d.jsxs)(i.Z,{children:[(0,d.jsx)(i.Z.Toggle,{variant:"btn btn-gradient-secondary",id:"dropdownMenuOutlineButton2",children:t}),(0,d.jsxs)(i.Z.Menu,{children:[(0,d.jsx)(i.Z.Header,{children:"Order Type"}),(0,d.jsx)(i.Z.Item,{onClick:function(){h("Hotels")},children:"Hotels"}),(0,d.jsx)(i.Z.Item,{onClick:function(){h("Deals")},children:"Deals"})]})]}),(0,d.jsx)("div",{className:"table-responsive",children:(0,d.jsxs)("table",{className:"table table-striped",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:" Name "}),(0,d.jsx)("th",{children:" Email "}),(0,d.jsx)("th",{children:" Phone "}),(0,d.jsxs)("th",{children:[" ",t," Name "]}),"Hotels"==t?(0,d.jsx)("th",{children:" Check In "}):(0,d.jsx)(d.Fragment,{}),"Hotels"==t?(0,d.jsx)("th",{children:" Check Out "}):(0,d.jsx)(d.Fragment,{}),"Hotels"==t?(0,d.jsx)("th",{children:" Adults "}):(0,d.jsx)(d.Fragment,{}),"Hotels"==t?(0,d.jsx)("th",{children:" Children "}):(0,d.jsx)(d.Fragment,{}),"Hotels"==t?(0,d.jsx)("th",{children:" Room "}):(0,d.jsx)(d.Fragment,{}),"Hotels"==t?(0,d.jsx)("th",{children:" Veg "}):(0,d.jsx)(d.Fragment,{}),"Hotels"==t?(0,d.jsx)("th",{children:" Non Veg "}):(0,d.jsx)(d.Fragment,{}),"Hotels"==t?(0,d.jsx)("th",{children:" Additional Note "}):(0,d.jsx)(d.Fragment,{}),"Hotels"!=t?(0,d.jsx)("th",{children:" Brand Name "}):(0,d.jsx)(d.Fragment,{}),(0,d.jsx)("th",{children:"Action"})]})}),(0,d.jsx)("tbody",{children:"Hotels"==t?v.map((function(e,n){return(0,d.jsx)(u,{data:e,declineHotel:L,acceptHotel:T},n)})):H.map((function(e,n){return(0,d.jsx)(p,{data:e,declineHotel:Y,acceptHotel:U},n)}))})]})})]})})}),I.length>1?(0,d.jsx)("nav",{style:{width:"100%",overflow:"scroll"},children:(0,d.jsxs)("ul",{className:"pagination",children:[(0,d.jsx)("li",{className:"page-item",children:(0,d.jsx)("button",{onClick:function(){F>1&&Q(F-1)},className:"page-link",children:"Previous"})}),I.map((function(e,n){return(0,d.jsx)("li",{className:F==n+1?"page-item active":"page-item",children:(0,d.jsx)("button",{onClick:function(){Q(n+1)},className:"page-link",children:n+1})},n)})),(0,d.jsx)("li",{className:"page-item",children:(0,d.jsx)("button",{onClick:function(){F<I.length&&Q(F+1)},className:"page-link",children:"Next"})})]})}):(0,d.jsx)(d.Fragment,{})]})]})};var u=function(e){var n=e.data,t=o.useState(n.data.visible),i=(0,a.Z)(t,2),r=i[0],l=i[1];return(0,d.jsxs)("tr",{children:[(0,d.jsxs)("td",{children:[" ",n.user.name," "]}),(0,d.jsxs)("td",{children:[" ",n.user.email," "]}),(0,d.jsxs)("td",{children:[" ",n.user.phone," "]}),(0,d.jsx)("td",{children:n.hotel?n.hotel.name:""}),(0,d.jsxs)("td",{children:[" ",(0,s.Ny)(n.data.check_in)," "]}),(0,d.jsxs)("td",{children:[" ",(0,s.Ny)(n.data.check_out)," "]}),(0,d.jsxs)("td",{children:[" ",n.data.adult," "]}),(0,d.jsxs)("td",{children:[" ",n.data.children," "]}),(0,d.jsxs)("td",{children:[" ",n.data.room," "]}),(0,d.jsxs)("td",{children:[" ",n.data.veg," "]}),(0,d.jsxs)("td",{children:[" ",n.data.non_veg," "]}),(0,d.jsxs)("td",{children:[" ",n.data.note," "]}),1==r?(0,d.jsx)("td",{style:{width:"200px"}}):(0,d.jsxs)("td",{children:[(0,d.jsx)("button",{onClick:function(){e.acceptHotel(n),l(1)},className:"btn btn-gradient-success btn-rounded btn-fw",children:"Accept"}),(0,d.jsx)("button",{onClick:function(){e.declineHotel(n),l(1)},style:{marginLeft:"10px"},className:"btn btn-gradient-danger btn-rounded btn-fw",children:"Cancel"})]})]})},p=function(e){var n=e.data,t=o.useState(n.data.visible),i=(0,a.Z)(t,2),r=i[0],s=i[1];return(0,d.jsxs)("tr",{children:[(0,d.jsxs)("td",{children:[" ",n.user?n.user.name:"..."," "]}),(0,d.jsxs)("td",{children:[" ",n.user.email," "]}),(0,d.jsxs)("td",{children:[" ",n.user?n.user.phone:"---"," "]}),(0,d.jsx)("td",{children:n.deal&&n.deal.name?n.deal.name:"..."}),(0,d.jsx)("td",{children:n.brand&&n.brand.name?n.brand.name:"..."}),1==r?(0,d.jsx)("td",{style:{width:"200px"}}):(0,d.jsxs)("td",{children:[(0,d.jsx)("button",{onClick:function(){e.acceptHotel(n),s(1)},className:"btn btn-gradient-success btn-rounded btn-fw",children:"Accept"}),(0,d.jsx)("button",{onClick:function(){e.declineHotel(n),s(1)},style:{marginLeft:"10px"},className:"btn btn-gradient-danger btn-rounded btn-fw",children:"Cancel"})]})]})}}}]);
//# sourceMappingURL=503.eb5c7fe7.chunk.js.map