{"version":3,"file":"static/js/8727.295b66c8.chunk.js","mappings":"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","sources":["app/hotels/HotelImage.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { ProgressBar } from 'react-bootstrap';\r\nimport { Form } from 'react-bootstrap';\r\nimport {useSelector} from 'react-redux'\r\nimport {postData, url} from '../../action'\r\nimport Axios from 'axios'\r\nimport { getAuth } from 'firebase/auth';\r\nimport app from './../../firebase';\r\n\r\nconst HotelImage = () => {\r\n    const hotels= useSelector(state => state.hotels)\r\n    const [Error,setError]= React.useState()\r\n    const [Data, setData]= React.useState(null)\r\n    const [Action, setAction]=React.useState(false)\r\n    const [File, setFile]=React.useState(null)\r\n    const [HotelId, setHotelId]=React.useState(null)\r\n    const [Id,setId]=React.useState(null)\r\n    const [Data2, setData2]= React.useState(null)\r\n    const auth=getAuth(app)\r\n    const [ImageSize,setImageSize]= React.useState(false)\r\n    React.useEffect(() => {\r\n        postData(url + '/getData', {\r\n            tableName: 'hotel_photos',\r\n        }).then(data => {\r\n            if(Array.isArray(data)){\r\n                setData(data)\r\n            }\r\n        })\r\n    },[Action])\r\n    const deleteData = (id) => {\r\n        postData(url + '/deleteData', {\r\n            tableName: 'hotel_photos',\r\n            condition:'id='+id,\r\n        }).then(data => {\r\n            console.log(data)\r\n            setAction(!Action)\r\n        })\r\n    }\r\n    const uploadImages = () =>{\r\n        if(!File || !HotelId){\r\n            setError('Fill all the fields')\r\n            return\r\n        }\r\n        if(!ImageSize){\r\n          setError('You can only add 1240*800 size image')\r\n          return\r\n        }\r\n        setError('Please wait...')\r\n        const data=new FormData()\r\n        data.append('file', File[0])\r\n        Axios.post(url+'/uploadWithData',data).then(res=>{\r\n          if(res.data.url){\r\n            postData(url + '/setData',{\r\n              auth: auth.currentUser,\r\n              tableName: 'hotel_photos',\r\n              columns: ['url','hotel_id'],\r\n              values: [res.data.url,HotelId],\r\n            }).then(result => {\r\n              console.log(result);\r\n              setError('Image Saved.')\r\n              setAction(!Action)\r\n            }).catch(e=>{\r\n                setError('Problem in uploading!')\r\n            })\r\n          }\r\n        })\r\n    }\r\n    React.useEffect(() => {\r\n      if(Data && Id){\r\n        let  arr=Data.filter(d=>d.hotel_id==Id)\r\n        setData2(arr)\r\n      }else{\r\n        setData2(Data)\r\n      }\r\n    },[Data+Id])\r\n    const imageSize=async(height,width,file)=>{\r\n      var url = URL.createObjectURL(file[0]);\r\n      var img = new Image;\r\n      \r\n      img.onload = function() {\r\n        if(img.width==width && img.height==height){\r\n          console.log(\"correct\")\r\n          setImageSize(true);\r\n          return true;\r\n        }else{\r\n          setImageSize(false);\r\n          URL.revokeObjectURL(img.src);\r\n          return false;\r\n        }\r\n      }\r\n      img.src = url;\r\n    }\r\n    return (\r\n        <div>\r\n          <div className=\"page-header\">\r\n            <h3 className=\"page-title\"> Add Hotel Images </h3>\r\n            <nav aria-label=\"breadcrumb\">\r\n              <ol className=\"breadcrumb\">\r\n                <li className=\"breadcrumb-item\"><a href=\"#\" onClick={event => event.preventDefault()}>Hotel</a></li>\r\n                <li className=\"breadcrumb-item active\" aria-current=\"page\">Image</li>\r\n              </ol>\r\n            </nav>\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-12 grid-margin\">\r\n              <div className=\"card\">\r\n                <div className=\"card-body\">\r\n                  <h4 className=\"card-title\">Information</h4>\r\n                  <form className=\"form-sample\">\r\n                    <p className=\"card-description\"> Deals info </p>\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-6\">\r\n                      <Form.Group className=\"row\">\r\n                          <label className=\"col-sm-3 col-form-label\">Select Hotel</label>\r\n                          <div className=\"col-sm-9\">\r\n                            <select onChange={(e)=>{\r\n                              //setDealId(e.target.value);\r\n                              setHotelId(e.target.value);\r\n                            }} className=\"form-control\">\r\n                            <option value=''>Select</option>\r\n                             {\r\n                                hotels?(\r\n                                    hotels.map((doc, i)=>(\r\n                                  <option value={doc.id} key={i}>{doc.name}</option>\r\n                                ))\r\n                              ):(\r\n                                <option>No Deals</option>\r\n                              )\r\n                             }\r\n                            </select>\r\n                          </div>\r\n                        </Form.Group>\r\n                      </div>\r\n                      <div className=\"col-md-6\">\r\n                        <Form.Group className=\"row\">\r\n                          <label className=\"col-sm-3 col-form-label\">Select Image (1240*800)</label>\r\n                          <div className=\"col-sm-9\">\r\n                          <Form.Control onChange={(e)=>{\r\n                            setFile(e.target.files)\r\n                            imageSize(800,1240,e.target.files)\r\n                          }}  type=\"file\" />\r\n                          </div>\r\n                        </Form.Group>\r\n                      </div>\r\n                    </div>\r\n                    {Error?(\r\n                    <div class=\"alert alert-primary\" role=\"alert\">{Error}</div>\r\n                  ):(\r\n                    <></>\r\n                  )}\r\n                  </form>\r\n                  <button onClick={uploadImages} className='btn btn-gradient-secondary btn-rounded btn-fw'>SAVE</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"row\">\r\n          <div className=\"col-lg-12 grid-margin stretch-card\">\r\n            <div className=\"card\">\r\n              <div className=\"card-body\">\r\n                <h4 className=\"card-title\">Information</h4>\r\n                <Form.Group className=\"row\">\r\n                          <label className=\"col-sm-3 col-form-label\">Sort By Hotel Name</label>\r\n                          <div className=\"col-sm-9\">\r\n                            <select onChange={(e)=>{\r\n                              //setDealId(e.target.value);\r\n                              setId(e.target.value);\r\n                            }} className=\"form-control\">\r\n                            <option value=''>Select</option>\r\n                             {\r\n                                hotels?(\r\n                                    hotels.map((doc, i)=>(\r\n                                  <option value={doc.id} key={i}>{doc.name}</option>\r\n                                ))\r\n                              ):(\r\n                                <option>No Deals</option>\r\n                              )\r\n                             }\r\n                            </select>\r\n                          </div>\r\n                        </Form.Group>\r\n                <div className=\"table-responsive\">\r\n                  <table className=\"table table-striped\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th> Image </th>\r\n                        <th> Hotel Name </th>\r\n                        <th> Action </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {\r\n                        Data2 && hotels?(\r\n                            Data2.map((doc, i) => (\r\n                                <tr key={i}>\r\n                                <td>\r\n                                <img src={doc.url} alt={doc.name} />\r\n                                </td>\r\n                                <td>{hotels?hotels.filter(d=>d.id==doc.hotel_id)[0].name:'...'}</td>\r\n                                <td>\r\n                                <button className='btn btn-gradient-danger btn-rounded btn-fw' onClick={()=>{\r\n                                    deleteData(doc.id)\r\n                                }}>\r\n                                Delete\r\n                                </button>\r\n                                </td>\r\n                                </tr>\r\n                            ))\r\n                        ):(<tr><td>Loading...</td></tr>)\r\n                      }\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          </div>\r\n        </div> \r\n    );\r\n};\r\n\r\nexport default HotelImage;"],"names":["hotels","useSelector","state","React","Error","setError","Data","setData","Action","setAction","File","setFile","HotelId","setHotelId","Id","setId","Data2","setData2","auth","getAuth","app","ImageSize","setImageSize","postData","url","tableName","then","data","Array","isArray","arr","filter","d","hotel_id","imageSize","height","width","file","URL","createObjectURL","img","Image","onload","console","log","revokeObjectURL","src","className","href","onClick","event","preventDefault","onChange","e","target","value","map","doc","i","id","name","files","type","class","role","FormData","append","Axios","res","currentUser","columns","values","result","catch","alt","condition"],"sourceRoot":""}