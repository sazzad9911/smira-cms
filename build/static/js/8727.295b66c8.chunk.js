"use strict";(self.webpackChunkpurple_react_free=self.webpackChunkpurple_react_free||[]).push([[8727],{8727:function(e,l,a){a.r(l);var s=a(5861),n=a(885),r=a(7757),t=a.n(r),c=a(2791),i=a(4912),o=a(8687),d=a(2930),h=a(4569),u=a.n(h),m=a(7266),j=a(3108),x=a(184);l.default=function(){var e=(0,o.v9)((function(e){return e.hotels})),l=c.useState(),a=(0,n.Z)(l,2),r=a[0],h=a[1],f=c.useState(null),p=(0,n.Z)(f,2),v=p[0],N=p[1],b=c.useState(!1),g=(0,n.Z)(b,2),w=g[0],S=g[1],Z=c.useState(null),C=(0,n.Z)(Z,2),y=C[0],D=C[1],_=c.useState(null),k=(0,n.Z)(_,2),H=k[0],I=k[1],A=c.useState(null),L=(0,n.Z)(A,2),U=L[0],Q=L[1],R=c.useState(null),q=(0,n.Z)(R,2),E=q[0],F=q[1],G=(0,m.v0)(j.Z),O=c.useState(!1),P=(0,n.Z)(O,2),z=P[0],B=P[1];c.useEffect((function(){(0,d.qC)(d.HQ+"/getData",{tableName:"hotel_photos"}).then((function(e){Array.isArray(e)&&N(e)}))}),[w]);c.useEffect((function(){if(v&&U){var e=v.filter((function(e){return e.hotel_id==U}));F(e)}else F(v)}),[v+U]);var V=function(){var e=(0,s.Z)(t().mark((function e(l,a,s){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=URL.createObjectURL(s[0]),(r=new Image).onload=function(){return r.width==a&&r.height==l?(console.log("correct"),B(!0),!0):(B(!1),URL.revokeObjectURL(r.src),!1)},r.src=n;case 4:case"end":return e.stop()}}),e)})));return function(l,a,s){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"page-header",children:[(0,x.jsx)("h3",{className:"page-title",children:" Add Hotel Images "}),(0,x.jsx)("nav",{"aria-label":"breadcrumb",children:(0,x.jsxs)("ol",{className:"breadcrumb",children:[(0,x.jsx)("li",{className:"breadcrumb-item",children:(0,x.jsx)("a",{href:"#",onClick:function(e){return e.preventDefault()},children:"Hotel"})}),(0,x.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Image"})]})})]}),(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-12 grid-margin",children:(0,x.jsx)("div",{className:"card",children:(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsx)("h4",{className:"card-title",children:"Information"}),(0,x.jsxs)("form",{className:"form-sample",children:[(0,x.jsx)("p",{className:"card-description",children:" Deals info "}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)(i.Z.Group,{className:"row",children:[(0,x.jsx)("label",{className:"col-sm-3 col-form-label",children:"Select Hotel"}),(0,x.jsx)("div",{className:"col-sm-9",children:(0,x.jsxs)("select",{onChange:function(e){I(e.target.value)},className:"form-control",children:[(0,x.jsx)("option",{value:"",children:"Select"}),e?e.map((function(e,l){return(0,x.jsx)("option",{value:e.id,children:e.name},l)})):(0,x.jsx)("option",{children:"No Deals"})]})})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)(i.Z.Group,{className:"row",children:[(0,x.jsx)("label",{className:"col-sm-3 col-form-label",children:"Select Image (1240*800)"}),(0,x.jsx)("div",{className:"col-sm-9",children:(0,x.jsx)(i.Z.Control,{onChange:function(e){D(e.target.files),V(800,1240,e.target.files)},type:"file"})})]})})]}),r?(0,x.jsx)("div",{class:"alert alert-primary",role:"alert",children:r}):(0,x.jsx)(x.Fragment,{})]}),(0,x.jsx)("button",{onClick:function(){if(y&&H)if(z){h("Please wait...");var e=new FormData;e.append("file",y[0]),u().post(d.HQ+"/uploadWithData",e).then((function(e){e.data.url&&(0,d.qC)(d.HQ+"/setData",{auth:G.currentUser,tableName:"hotel_photos",columns:["url","hotel_id"],values:[e.data.url,H]}).then((function(e){console.log(e),h("Image Saved."),S(!w)})).catch((function(e){h("Problem in uploading!")}))}))}else h("You can only add 1240*800 size image");else h("Fill all the fields")},className:"btn btn-gradient-secondary btn-rounded btn-fw",children:"SAVE"})]})})})}),(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-lg-12 grid-margin stretch-card",children:(0,x.jsx)("div",{className:"card",children:(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsx)("h4",{className:"card-title",children:"Information"}),(0,x.jsxs)(i.Z.Group,{className:"row",children:[(0,x.jsx)("label",{className:"col-sm-3 col-form-label",children:"Sort By Hotel Name"}),(0,x.jsx)("div",{className:"col-sm-9",children:(0,x.jsxs)("select",{onChange:function(e){Q(e.target.value)},className:"form-control",children:[(0,x.jsx)("option",{value:"",children:"Select"}),e?e.map((function(e,l){return(0,x.jsx)("option",{value:e.id,children:e.name},l)})):(0,x.jsx)("option",{children:"No Deals"})]})})]}),(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsxs)("table",{className:"table table-striped",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:" Image "}),(0,x.jsx)("th",{children:" Hotel Name "}),(0,x.jsx)("th",{children:" Action "})]})}),(0,x.jsx)("tbody",{children:E&&e?E.map((function(l,a){return(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("img",{src:l.url,alt:l.name})}),(0,x.jsx)("td",{children:e?e.filter((function(e){return e.id==l.hotel_id}))[0].name:"..."}),(0,x.jsx)("td",{children:(0,x.jsx)("button",{className:"btn btn-gradient-danger btn-rounded btn-fw",onClick:function(){var e;e=l.id,(0,d.qC)(d.HQ+"/deleteData",{tableName:"hotel_photos",condition:"id="+e}).then((function(e){console.log(e),S(!w)}))},children:"Delete"})})]},a)})):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{children:"Loading..."})})})]})})]})})})})]})}}}]);
//# sourceMappingURL=8727.295b66c8.chunk.js.map